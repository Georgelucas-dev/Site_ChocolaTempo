<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CHOCOLATEMPO — Cadastro de Clientes</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <link rel="icon" href="./assets/logo.jpg" type="image/jpeg">
  <style>
    :root {
      --primary: #4a2c2a;
      --secondary: #d4a55d;
      --accent: #7b3f00;
      --light: #f9f5f0;
      --white: #ffffff;
      --gray: #6c757d;
      --success: #28a745;
      --danger: #e74c3c;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
      background: var(--light);
      color: var(--primary);
      min-height: 100vh;
    }

    /* Header */
    .header-wrapper {
      background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
      box-shadow: 0 4px 20px rgba(74, 44, 42, 0.3);
      position: sticky;
      top: 0;
      z-index: 1000;
    }

    .header {
      max-width: 1200px;
      margin: 0 auto;
      padding: 15px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 20px;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 15px;
      color: var(--white);
      text-decoration: none;
    }

    .logo img {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      border: 2px solid var(--secondary);
    }

    .logo h1 {
      font-size: 1.8rem;
      font-weight: 700;
      letter-spacing: 1px;
    }

    .nav {
      display: flex;
      gap: 25px;
      align-items: center;
    }

    .nav a {
      color: var(--white);
      text-decoration: none;
      font-weight: 500;
      padding: 8px 16px;
      border-radius: 20px;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .nav a:hover {
      background: rgba(255, 255, 255, 0.1);
      transform: translateY(-2px);
    }

    .nav a.active {
      background: var(--secondary);
      color: var(--primary);
    }

    /* Main Content */
    .main-content {
      max-width: 1200px;
      margin: 0 auto;
      padding: 30px 20px;
    }

    .page-header {
      margin-bottom: 40px;
      text-align: center;
    }

    .page-title {
      color: var(--primary);
      margin: 0;
      font-size: 1.8rem;
      display: flex;
      align-items: center;
      gap: 10px;
      justify-content: center;
    }

    .btn-primary {
      background: var(--secondary);
      color: var(--primary);
      border: none;
      padding: 12px 24px;
      border-radius: 6px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
      text-decoration: none;
    }

    .btn-primary:hover {
      background: var(--white);
      transform: translateY(-2px);
    }

    /* Filtros */
    .filtros-section {
      background: var(--white);
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      margin-bottom: 30px;
    }

    .filtros-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      align-items: end;
    }

    .form-group {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .form-group label {
      font-weight: 600;
      color: var(--primary);
    }

    .form-group input,
    .form-group select {
      padding: 10px;
      border: 2px solid #e1e5e9;
      border-radius: 6px;
      font-size: 14px;
      transition: border-color 0.3s ease;
    }

    .form-group input:focus,
    .form-group select:focus {
      outline: none;
      border-color: var(--secondary);
    }

    .btn-filtrar {
      background: var(--primary);
      color: var(--white);
      padding: 10px 20px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .btn-filtrar:hover {
      background: var(--accent);
    }

    /* Lista de Clientes */
    .clientes-section {
      padding: 30px;
    }

    .section-title {
      color: var(--primary);
      margin-bottom: 25px;
      font-size: 1.5rem;
      display: flex;
      align-items: center;
      gap: 10px;
      justify-content: space-between;
    }

    .clientes-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
      gap: 20px;
      margin-bottom: 40px;
    }

    .cliente-card {
      background: var(--white);
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .cliente-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    }

    .cliente-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 15px;
    }

    .cliente-nome {
      font-size: 1.2rem;
      font-weight: 600;
      color: var(--primary);
      margin: 0;
    }

    .cliente-actions {
      display: flex;
      gap: 10px;
    }

    .btn-editar, .btn-excluir {
      padding: 6px 12px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.9rem;
      transition: all 0.3s ease;
    }

    .btn-editar {
      background: var(--secondary);
      color: var(--primary);
    }

    .btn-editar:hover {
      background: var(--accent);
      color: var(--white);
    }

    .btn-excluir {
      background: var(--danger);
      color: var(--white);
    }

    .btn-excluir:hover {
      background: #c0392b;
    }

    .cliente-info {
      display: grid;
      gap: 8px;
    }

    .cliente-item {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.9rem;
    }

    .cliente-item i {
      color: var(--secondary);
      width: 16px;
    }

    /* Formulário de Cadastro */
    .form-section {
      background: var(--white);
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      margin-bottom: 30px;
      display: none;
    }

    .form-section.active {
      display: block;
    }

    .form-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-bottom: 25px;
    }

    .form-actions {
      display: flex;
      gap: 15px;
      justify-content: flex-end;
    }

    .btn-cancelar {
      background: var(--gray);
      color: var(--white);
      padding: 12px 24px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .btn-cancelar:hover {
      background: #5a6268;
    }

    .btn-salvar {
      background: var(--success);
      color: var(--white);
      padding: 12px 24px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .btn-salvar:hover {
      background: #218838;
    }

    /* Modal */
    .modal {
      display: none;
      position: fixed;
      z-index: 10000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      animation: fadeIn 0.3s ease;
      overflow-y: auto;
    }

    .modal-content {
      background-color: var(--white);
      margin: 2% auto;
      padding: 30px;
      border-radius: 12px;
      width: 90%;
      max-width: 800px;
      position: relative;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      animation: slideUp 0.3s ease;
      max-height: 90vh;
      overflow-y: auto;
    }

    .close {
      color: #aaa;
      font-size: 28px;
      font-weight: bold;
      position: absolute;
      right: 15px;
      top: 15px;
      cursor: pointer;
      transition: color 0.3s ease;
    }

    .close:hover {
      color: var(--danger);
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 25px;
      padding-bottom: 15px;
      border-bottom: 2px solid var(--light);
    }

    .modal-header h3 {
      color: var(--primary);
      margin: 0;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }

    @keyframes slideUp {
      from {
        transform: translateY(30px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    .close:hover {
      color: var(--danger);
    }

    /* Responsivo */
    @media (max-width: 768px) {
      .header {
        flex-direction: column;
        text-align: center;
      }

      .nav {
        flex-wrap: wrap;
        justify-content: center;
      }

      .clientes-grid {
        grid-template-columns: 1fr;
      }

      .form-grid {
        grid-template-columns: 1fr;
      }

      .form-actions {
        flex-direction: column;
      }

      .modal-content {
        margin: 5% auto;
        width: 95%;
        padding: 20px;
        max-height: 85vh;
      }
    }
  </style>
</head>

<body>
  <div class="header-wrapper">
    <div class="header">
      <a href="index.html" class="logo">
        <img src="./assets/logo.jpg" alt="CHOCOLATEMPO">
        <h1>CHOCOLATEMPO</h1>
      </a>
      <nav class="nav">
        <a href="index.html"><i class="fas fa-home"></i> Home</a>
        <a href="cadastro_produto.html"><i class="fas fa-cookie"></i> Produtos</a>
        <a href="cadastro_fornecedor.html"><i class="fas fa-truck"></i> Fornecedores</a>
        <a href="cadastro_motoboy.html"><i class="fas fa-motorcycle"></i> Motoboys</a>
        <a href="cadastro_cliente.html" class="active"><i class="fas fa-users"></i> Clientes</a>
        <a href="cadastro_funcionario.html"><i class="fas fa-user-tie"></i> Funcionários</a>
        <a href="relatorios.html"><i class="fas fa-chart-line"></i> Relatórios</a>
        <a href="carrinho.html"><i class="fas fa-shopping-cart"></i> Carrinho</a>
      </nav>
    </div>
  </div>

  <div class="main-content">
    <div class="page-header">
      <h2 class="page-title">
        <i class="fas fa-users"></i>
        Cadastro de Clientes
      </h2>
    </div>

    <!-- Filtros -->
    <div class="filtros-section">
      <div class="filtros-grid">
        <div class="form-group">
          <label for="filtroNome">Nome:</label>
          <input type="text" id="filtroNome" placeholder="Buscar por nome...">
        </div>
        <div class="form-group">
          <label for="filtroCPF">CPF:</label>
          <input type="text" id="filtroCPF" placeholder="Buscar por CPF...">
        </div>
        <div class="form-group">
          <label for="filtroEmail">E-mail:</label>
          <input type="text" id="filtroEmail" placeholder="Buscar por e-mail...">
        </div>
        <div class="form-group">
          <label for="filtroStatus">Status:</label>
          <select id="filtroStatus">
            <option value="Todos">Todos</option>
            <option value="Ativo">Ativo</option>
            <option value="Inativo">Inativo</option>
          </select>
        </div>
        <div class="form-group">
          <button type="button" class="btn-filtrar" onclick="aplicarFiltros()">
            <i class="fas fa-search"></i> Filtrar
          </button>
        </div>
      </div>
    </div>

    <!-- Seção de Clientes -->
    <div class="clientes-section">
      <div class="section-title">
        <span><i class="fas fa-list"></i> Lista de Clientes</span>
        <button class="btn-primary" onclick="mostrarFormulario()">
          <i class="fas fa-plus"></i> Novo Cliente
        </button>
      </div>

      <!-- Lista de Clientes -->
      <div class="clientes-grid" id="clientes-lista">
        <!-- Clientes serão carregados aqui -->
      </div>
    </div>

    <!-- Formulário de Cadastro -->
    <div class="form-section" id="form-section">
      <h3><i class="fas fa-user-plus"></i> Cadastro de Cliente</h3>
      <form id="form-cliente">
        <div class="form-grid">
          <div class="form-group">
            <label for="nome">Nome Completo *</label>
            <input type="text" id="nome" name="nome" required>
          </div>
          <div class="form-group">
            <label for="cpf">CPF *</label>
            <input type="text" id="cpf" name="cpf" required placeholder="000.000.000-00">
          </div>
          <div class="form-group">
            <label for="email">E-mail *</label>
            <input type="email" id="email" name="email" required>
          </div>
          <div class="form-group">
            <label for="telefone">Telefone *</label>
            <input type="text" id="telefone" name="telefone" required placeholder="(00) 00000-0000">
          </div>
          <div class="form-group">
            <label for="dataNascimento">Data de Nascimento *</label>
            <input type="date" id="dataNascimento" name="dataNascimento" required>
          </div>
          <div class="form-group">
            <label for="status">Status</label>
            <select id="status" name="status">
              <option value="Ativo">Ativo</option>
              <option value="Inativo">Inativo</option>
            </select>
          </div>
          <div class="form-group">
            <label for="cep">CEP</label>
            <input type="text" id="cep" name="cep" placeholder="00000-000">
          </div>
          <div class="form-group">
            <label for="endereco">Endereço</label>
            <input type="text" id="endereco" name="endereco" placeholder="Rua, número">
          </div>
          <div class="form-group">
            <label for="bairro">Bairro</label>
            <input type="text" id="bairro" name="bairro">
          </div>
          <div class="form-group">
            <label for="cidade">Cidade</label>
            <input type="text" id="cidade" name="cidade">
          </div>
          <div class="form-group">
            <label for="estado">Estado</label>
            <select id="estado" name="estado">
              <option value="">Selecione...</option>
              <option value="AC">Acre</option>
              <option value="AL">Alagoas</option>
              <option value="AP">Amapá</option>
              <option value="AM">Amazonas</option>
              <option value="BA">Bahia</option>
              <option value="CE">Ceará</option>
              <option value="DF">Distrito Federal</option>
              <option value="ES">Espírito Santo</option>
              <option value="GO">Goiás</option>
              <option value="MA">Maranhão</option>
              <option value="MT">Mato Grosso</option>
              <option value="MS">Mato Grosso do Sul</option>
              <option value="MG">Minas Gerais</option>
              <option value="PA">Pará</option>
              <option value="PB">Paraíba</option>
              <option value="PR">Paraná</option>
              <option value="PE">Pernambuco</option>
              <option value="PI">Piauí</option>
              <option value="RJ">Rio de Janeiro</option>
              <option value="RN">Rio Grande do Norte</option>
              <option value="RS">Rio Grande do Sul</option>
              <option value="RO">Rondônia</option>
              <option value="RR">Roraima</option>
              <option value="SC">Santa Catarina</option>
              <option value="SP">São Paulo</option>
              <option value="SE">Sergipe</option>
              <option value="TO">Tocantins</option>
            </select>
          </div>
          <div class="form-group">
            <label for="observacoes">Observações</label>
            <input type="text" id="observacoes" name="observacoes" placeholder="Informações adicionais">
          </div>
        </div>
        <div class="form-actions">
          <button type="button" class="btn-cancelar" onclick="ocultarFormulario()">
            <i class="fas fa-times"></i> Cancelar
          </button>
          <button type="submit" class="btn-salvar">
            <i class="fas fa-save"></i> Salvar Cliente
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal de Edição -->
  <div id="modal-editar" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3><i class="fas fa-edit"></i> Editar Cliente</h3>
        <span class="close" onclick="fecharModal()">&times;</span>
      </div>
      <form id="form-editar">
        <div class="form-grid">
          <div class="form-group">
            <label for="editNome">Nome Completo *</label>
            <input type="text" id="editNome" name="nome" required>
          </div>
          <div class="form-group">
            <label for="editCpf">CPF *</label>
            <input type="text" id="editCpf" name="cpf" required>
          </div>
          <div class="form-group">
            <label for="editEmail">E-mail *</label>
            <input type="email" id="editEmail" name="email" required>
          </div>
          <div class="form-group">
            <label for="editTelefone">Telefone *</label>
            <input type="text" id="editTelefone" name="telefone" required>
          </div>
          <div class="form-group">
            <label for="editDataNascimento">Data de Nascimento *</label>
            <input type="date" id="editDataNascimento" name="dataNascimento" required>
          </div>
          <div class="form-group">
            <label for="editStatus">Status</label>
            <select id="editStatus" name="status">
              <option value="Ativo">Ativo</option>
              <option value="Inativo">Inativo</option>
            </select>
          </div>
          <div class="form-group">
            <label for="editCep">CEP</label>
            <input type="text" id="editCep" name="cep">
          </div>
          <div class="form-group">
            <label for="editEndereco">Endereço</label>
            <input type="text" id="editEndereco" name="endereco">
          </div>
          <div class="form-group">
            <label for="editBairro">Bairro</label>
            <input type="text" id="editBairro" name="bairro">
          </div>
          <div class="form-group">
            <label for="editCidade">Cidade</label>
            <input type="text" id="editCidade" name="cidade">
          </div>
          <div class="form-group">
            <label for="editEstado">Estado</label>
            <select id="editEstado" name="estado">
              <option value="">Selecione...</option>
              <option value="AC">Acre</option>
              <option value="AL">Alagoas</option>
              <option value="AP">Amapá</option>
              <option value="AM">Amazonas</option>
              <option value="BA">Bahia</option>
              <option value="CE">Ceará</option>
              <option value="DF">Distrito Federal</option>
              <option value="ES">Espírito Santo</option>
              <option value="GO">Goiás</option>
              <option value="MA">Maranhão</option>
              <option value="MT">Mato Grosso</option>
              <option value="MS">Mato Grosso do Sul</option>
              <option value="MG">Minas Gerais</option>
              <option value="PA">Pará</option>
              <option value="PB">Paraíba</option>
              <option value="PR">Paraná</option>
              <option value="PE">Pernambuco</option>
              <option value="PI">Piauí</option>
              <option value="RJ">Rio de Janeiro</option>
              <option value="RN">Rio Grande do Norte</option>
              <option value="RS">Rio Grande do Sul</option>
              <option value="RO">Rondônia</option>
              <option value="RR">Roraima</option>
              <option value="SC">Santa Catarina</option>
              <option value="SP">São Paulo</option>
              <option value="SE">Sergipe</option>
              <option value="TO">Tocantins</option>
            </select>
          </div>
          <div class="form-group">
            <label for="editObservacoes">Observações</label>
            <input type="text" id="editObservacoes" name="observacoes">
          </div>
        </div>
        <div class="form-actions">
          <button type="button" class="btn-cancelar" onclick="fecharModal()">
            <i class="fas fa-times"></i> Cancelar
          </button>
          <button type="submit" class="btn-salvar">
            <i class="fas fa-save"></i> Salvar Alterações
          </button>
        </div>
      </form>
    </div>
  </div>

  <script>
    let clienteEditandoId = null;

    // Inicialização
    document.addEventListener('DOMContentLoaded', function() {
      inicializarClientes();
      carregarClientes();
      
      // Máscaras para CPF e telefone
      document.getElementById('cpf').addEventListener('input', mascaraCPF);
      document.getElementById('editCpf').addEventListener('input', mascaraCPF);
      document.getElementById('telefone').addEventListener('input', mascaraTelefone);
      document.getElementById('editTelefone').addEventListener('input', mascaraTelefone);
      document.getElementById('cep').addEventListener('input', mascaraCEP);
      document.getElementById('editCep').addEventListener('input', mascaraCEP);
    });

    function inicializarClientes() {
      if (!localStorage.getItem('clientes')) {
        const clientes = [
          { 
            id: 1, 
            nome: 'Maria Silva Santos', 
            cpf: '123.456.789-00', 
            email: 'maria@email.com', 
            telefone: '(11) 99999-0001',
            dataNascimento: '1985-03-15',
            status: 'Ativo',
            cep: '01234-567',
            endereco: 'Rua das Flores, 123',
            bairro: 'Centro',
            cidade: 'São Paulo',
            estado: 'SP',
            observacoes: 'Cliente VIP'
          },
          { 
            id: 2, 
            nome: 'João Carlos Oliveira', 
            cpf: '987.654.321-00', 
            email: 'joao@email.com', 
            telefone: '(11) 88888-0002',
            dataNascimento: '1990-07-22',
            status: 'Ativo',
            cep: '04567-890',
            endereco: 'Av. Principal, 456',
            bairro: 'Vila Nova',
            cidade: 'São Paulo',
            estado: 'SP',
            observacoes: ''
          }
        ];
        localStorage.setItem('clientes', JSON.stringify(clientes));
      }
    }

    function carregarClientes() {
      const clientes = JSON.parse(localStorage.getItem('clientes') || '[]');
      const lista = document.getElementById('clientes-lista');
      
      if (clientes.length === 0) {
        lista.innerHTML = '<p style="text-align: center; color: var(--gray); padding: 40px;">Nenhum cliente cadastrado ainda.</p>';
        return;
      }

      lista.innerHTML = clientes.map(cliente => `
        <div class="cliente-card">
          <div class="cliente-header">
            <h3 class="cliente-nome">${cliente.nome}</h3>
            <div class="cliente-actions">
              <button class="btn-editar" onclick="editarCliente(${cliente.id})" title="Editar">
                <i class="fas fa-edit"></i>
              </button>
              <button class="btn-excluir" onclick="excluirCliente(${cliente.id})" title="Excluir">
                <i class="fas fa-trash"></i>
              </button>
            </div>
          </div>
          <div class="cliente-info">
            <div class="cliente-item">
              <i class="fas fa-id-card"></i>
              <span><strong>CPF:</strong> ${cliente.cpf}</span>
            </div>
            <div class="cliente-item">
              <i class="fas fa-envelope"></i>
              <span><strong>E-mail:</strong> ${cliente.email}</span>
            </div>
            <div class="cliente-item">
              <i class="fas fa-phone"></i>
              <span><strong>Telefone:</strong> ${cliente.telefone}</span>
            </div>
            <div class="cliente-item">
              <i class="fas fa-birthday-cake"></i>
              <span><strong>Nascimento:</strong> ${formatarData(cliente.dataNascimento)}</span>
            </div>
            <div class="cliente-item">
              <i class="fas fa-${cliente.status === 'Ativo' ? 'check-circle' : 'times-circle'}"></i>
              <span><strong>Status:</strong> <span style="color: ${cliente.status === 'Ativo' ? 'var(--success)' : 'var(--danger)'}">${cliente.status}</span></span>
            </div>
            ${cliente.endereco ? `
            <div class="cliente-item">
              <i class="fas fa-map-marker-alt"></i>
              <span><strong>Endereço:</strong> ${cliente.endereco}, ${cliente.bairro || ''} - ${cliente.cidade || ''}, ${cliente.estado || ''}</span>
            </div>
            ` : ''}
            ${cliente.observacoes ? `
            <div class="cliente-item">
              <i class="fas fa-sticky-note"></i>
              <span><strong>Obs:</strong> ${cliente.observacoes}</span>
            </div>
            ` : ''}
          </div>
        </div>
      `).join('');
    }

    function mostrarFormulario() {
      document.getElementById('form-section').classList.add('active');
      document.getElementById('form-cliente').reset();
    }

    function ocultarFormulario() {
      document.getElementById('form-section').classList.remove('active');
    }

    // Máscaras
    function mascaraCPF(e) {
      e.target.value = e.target.value
        .replace(/\D/g, '')
        .replace(/(\d{3})(\d)/, '$1.$2')
        .replace(/(\d{3})(\d)/, '$1.$2')
        .replace(/(\d{3})(\d{1,2})/, '$1-$2')
        .replace(/(-\d{2})\d+?$/, '$1');
    }

    function mascaraTelefone(e) {
      e.target.value = e.target.value
        .replace(/\D/g, '')
        .replace(/(\d{2})(\d)/, '($1) $2')
        .replace(/(\d{5})(\d)/, '$1-$2')
        .replace(/(-\d{4})\d+?$/, '$1');
    }

    function mascaraCEP(e) {
      e.target.value = e.target.value
        .replace(/\D/g, '')
        .replace(/(\d{5})(\d)/, '$1-$2')
        .replace(/(-\d{3})\d+?$/, '$1');
    }

    function formatarData(data) {
      const date = new Date(data + 'T00:00:00');
      return date.toLocaleDateString('pt-BR');
    }

    // Formulário de cadastro
    document.getElementById('form-cliente').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const formData = new FormData(e.target);
      const cliente = {
        id: Date.now(),
        nome: formData.get('nome'),
        cpf: formData.get('cpf'),
        email: formData.get('email'),
        telefone: formData.get('telefone'),
        dataNascimento: formData.get('dataNascimento'),
        status: formData.get('status'),
        cep: formData.get('cep'),
        endereco: formData.get('endereco'),
        bairro: formData.get('bairro'),
        cidade: formData.get('cidade'),
        estado: formData.get('estado'),
        observacoes: formData.get('observacoes')
      };

      // Validar CPF único
      const clientes = JSON.parse(localStorage.getItem('clientes') || '[]');
      if (clientes.some(c => c.cpf === cliente.cpf)) {
        alert('Já existe um cliente com este CPF!');
        return;
      }

      salvarCliente(cliente);
      ocultarFormulario();
    });

    function salvarCliente(cliente) {
      const clientes = JSON.parse(localStorage.getItem('clientes') || '[]');
      clientes.push(cliente);
      localStorage.setItem('clientes', JSON.stringify(clientes));
      carregarClientes();
      alert('Cliente cadastrado com sucesso!');
    }

    function editarCliente(id) {
      const clientes = JSON.parse(localStorage.getItem('clientes') || '[]');
      const cliente = clientes.find(c => c.id === id);
      
      if (cliente) {
        clienteEditandoId = id;
        document.getElementById('editNome').value = cliente.nome;
        document.getElementById('editCpf').value = cliente.cpf;
        document.getElementById('editEmail').value = cliente.email;
        document.getElementById('editTelefone').value = cliente.telefone;
        document.getElementById('editDataNascimento').value = cliente.dataNascimento;
        document.getElementById('editStatus').value = cliente.status;
        document.getElementById('editCep').value = cliente.cep || '';
        document.getElementById('editEndereco').value = cliente.endereco || '';
        document.getElementById('editBairro').value = cliente.bairro || '';
        document.getElementById('editCidade').value = cliente.cidade || '';
        document.getElementById('editEstado').value = cliente.estado || '';
        document.getElementById('editObservacoes').value = cliente.observacoes || '';
        
        const modal = document.getElementById('modal-editar');
        modal.style.display = 'block';
        
        // Garantir que o modal está no topo
        setTimeout(() => {
          modal.style.zIndex = '10000';
        }, 10);
      }
    }

    // Formulário de edição
    document.getElementById('form-editar').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const formData = new FormData(e.target);
      const clientes = JSON.parse(localStorage.getItem('clientes') || '[]');
      const index = clientes.findIndex(c => c.id === clienteEditandoId);
      
      if (index !== -1) {
        // Validar CPF único (exceto o próprio cliente)
        const cpfEditado = formData.get('cpf');
        if (clientes.some(c => c.cpf === cpfEditado && c.id !== clienteEditandoId)) {
          alert('Já existe outro cliente com este CPF!');
          return;
        }

        clientes[index] = {
          ...clientes[index],
          nome: formData.get('nome'),
          cpf: formData.get('cpf'),
          email: formData.get('email'),
          telefone: formData.get('telefone'),
          dataNascimento: formData.get('dataNascimento'),
          status: formData.get('status'),
          cep: formData.get('cep'),
          endereco: formData.get('endereco'),
          bairro: formData.get('bairro'),
          cidade: formData.get('cidade'),
          estado: formData.get('estado'),
          observacoes: formData.get('observacoes')
        };
        
        localStorage.setItem('clientes', JSON.stringify(clientes));
        carregarClientes();
        fecharModal();
        alert('Cliente atualizado com sucesso!');
      }
    });

    function fecharModal() {
      document.getElementById('modal-editar').style.display = 'none';
      clienteEditandoId = null;
    }

    function excluirCliente(id) {
      if (confirm('Tem certeza que deseja excluir este cliente?')) {
        const clientes = JSON.parse(localStorage.getItem('clientes') || '[]');
        const novosClientes = clientes.filter(c => c.id !== id);
        localStorage.setItem('clientes', JSON.stringify(novosClientes));
        carregarClientes();
        alert('Cliente excluído com sucesso!');
      }
    }

    // Filtros
    function aplicarFiltros() {
      const nome = document.getElementById('filtroNome').value.toLowerCase();
      const cpf = document.getElementById('filtroCPF').value.toLowerCase();
      const email = document.getElementById('filtroEmail').value.toLowerCase();
      const status = document.getElementById('filtroStatus').value;
      
      let clientes = JSON.parse(localStorage.getItem('clientes') || '[]');
      
      if (nome) {
        clientes = clientes.filter(c => c.nome.toLowerCase().includes(nome));
      }
      
      if (cpf) {
        clientes = clientes.filter(c => c.cpf.toLowerCase().includes(cpf));
      }
      
      if (email) {
        clientes = clientes.filter(c => c.email.toLowerCase().includes(email));
      }
      
      if (status !== 'Todos') {
        clientes = clientes.filter(c => c.status === status);
      }
      
      renderizarClientesFiltrados(clientes);
    }

    function renderizarClientesFiltrados(clientes) {
      const lista = document.getElementById('clientes-lista');
      
      if (clientes.length === 0) {
        lista.innerHTML = '<p style="text-align: center; color: var(--gray); padding: 40px;">Nenhum cliente encontrado com os filtros aplicados.</p>';
        return;
      }

      lista.innerHTML = clientes.map(cliente => `
        <div class="cliente-card">
          <div class="cliente-header">
            <h3 class="cliente-nome">${cliente.nome}</h3>
            <div class="cliente-actions">
              <button class="btn-editar" onclick="editarCliente(${cliente.id})" title="Editar">
                <i class="fas fa-edit"></i>
              </button>
              <button class="btn-excluir" onclick="excluirCliente(${cliente.id})" title="Excluir">
                <i class="fas fa-trash"></i>
              </button>
            </div>
          </div>
          <div class="cliente-info">
            <div class="cliente-item">
              <i class="fas fa-id-card"></i>
              <span><strong>CPF:</strong> ${cliente.cpf}</span>
            </div>
            <div class="cliente-item">
              <i class="fas fa-envelope"></i>
              <span><strong>E-mail:</strong> ${cliente.email}</span>
            </div>
            <div class="cliente-item">
              <i class="fas fa-phone"></i>
              <span><strong>Telefone:</strong> ${cliente.telefone}</span>
            </div>
            <div class="cliente-item">
              <i class="fas fa-birthday-cake"></i>
              <span><strong>Nascimento:</strong> ${formatarData(cliente.dataNascimento)}</span>
            </div>
            <div class="cliente-item">
              <i class="fas fa-${cliente.status === 'Ativo' ? 'check-circle' : 'times-circle'}"></i>
              <span><strong>Status:</strong> <span style="color: ${cliente.status === 'Ativo' ? 'var(--success)' : 'var(--danger)'}">${cliente.status}</span></span>
            </div>
            ${cliente.endereco ? `
            <div class="cliente-item">
              <i class="fas fa-map-marker-alt"></i>
              <span><strong>Endereço:</strong> ${cliente.endereco}, ${cliente.bairro || ''} - ${cliente.cidade || ''}, ${cliente.estado || ''}</span>
            </div>
            ` : ''}
            ${cliente.observacoes ? `
            <div class="cliente-item">
              <i class="fas fa-sticky-note"></i>
              <span><strong>Obs:</strong> ${cliente.observacoes}</span>
            </div>
            ` : ''}
          </div>
        </div>
      `).join('');
    }

    // Limpar filtros ao pressionar Enter nos campos de busca
    document.addEventListener('keyup', function(e) {
      if (e.target.matches('#filtroNome, #filtroCPF, #filtroEmail')) {
        if (e.key === 'Enter') {
          aplicarFiltros();
        }
      }
    });

    // Fechar modal ao clicar fora
    window.addEventListener('click', function(event) {
      const modal = document.getElementById('modal-editar');
      if (event.target === modal) {
        fecharModal();
      }
    });
  </script>
</body>
</html>